<div id="canvas-container" class="fixed inset-0 z-0 pointer-events-none opacity-80"></div>

<script>
    import * as THREE from 'three';

    const container = document.getElementById('canvas-container');

    if (container) {
        const scene = new THREE.Scene();
        // Transparent background
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 30;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Geometries
        const geometry = new THREE.IcosahedronGeometry(15, 1);
        const wireframe = new THREE.WireframeGeometry(geometry);
        
        const lineMaterial = new THREE.LineBasicMaterial({ 
            color: 0x00f3ff, 
            transparent: true, 
            opacity: 0.4 
        });
        
        const sphere = new THREE.LineSegments(wireframe, lineMaterial);
        scene.add(sphere);

        // Secondary inner shape
        const innerGeo = new THREE.IcosahedronGeometry(8, 0);
        const innerWireframe = new THREE.WireframeGeometry(innerGeo);
        const innerMaterial = new THREE.LineBasicMaterial({ 
            color: 0x9944ff, 
            transparent: true, 
            opacity: 0.5 
        });
        const innerSphere = new THREE.LineSegments(innerWireframe, innerMaterial);
        scene.add(innerSphere);

        // Ambient Particles
        const particlesGeo = new THREE.BufferGeometry();
        const particlesCount = 200;
        const posArray = new Float32Array(particlesCount * 3);

        for(let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 100;
        }

        particlesGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.15,
            color: 0xffffff,
            transparent: true,
            opacity: 0.8
        });
        const particlesMesh = new THREE.Points(particlesGeo, particlesMaterial);
        scene.add(particlesMesh);

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);

            sphere.rotation.x += 0.001;
            sphere.rotation.y += 0.001;

            innerSphere.rotation.x -= 0.002;
            innerSphere.rotation.y -= 0.002;

            particlesMesh.rotation.y += 0.0005;

            // Mouse interaction (gentle parallax)
            // (Optional: add if needed, sticking to auto-rotation for now to keep it lightweight)

            renderer.render(scene, camera);
        }

        animate();

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    }
</script>
