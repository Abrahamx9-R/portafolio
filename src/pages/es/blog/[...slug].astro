---
import { getCollection, render } from "astro:content";
import Layout from "../../../layouts/Layout.astro";
import { t } from "../../../i18n/translations";

export async function getStaticPaths() {
    const posts = (await getCollection("blog")).filter(
        (post) => post.data.lang === "es",
    );
    return posts.map((post) => ({
        params: { slug: post.slug.split("/").pop() },
        props: post,
    }));
}

const post = Astro.props;
const { Content } = await render(post);
const lang = "es";
---

<Layout lang={lang}>
    <article class="pt-32 pb-20 container mx-auto px-4 max-w-5xl">
        <!-- Decoration -->
        <div
            class="fixed top-32 left-8 hidden xl:block w-2 h-64 bg-gradient-to-b from-neon-cyan to-transparent opacity-20"
        >
        </div>

        <div class="mb-12 border-b border-white/10 pb-8">
            <div
                class="flex items-center gap-4 mb-6 font-mono text-sm text-gray-400"
            >
                <span class="text-neon-cyan"
                    >{t(lang, "blog.logEntry")}: {
                        post.data.pubDate.toISOString().split("T")[0]
                    }</span
                >
                <span>/</span>
                <span>{t(lang, "blog.auth")}</span>
            </div>

            <h1
                class="text-4xl md:text-6xl font-heading font-black text-white mb-6 uppercase tracking-tight"
            >
                {post.data.title}
            </h1>

            <div class="flex flex-wrap gap-2">
                {
                    post.data.tags?.map((tag) => (
                        <span class="px-3 py-1 border border-rectifier-orange/50 text-rectifier-orange text-xs font-mono uppercase tracking-wider">
                            {tag}
                        </span>
                    ))
                }
            </div>
        </div>

        <div
            class="prose prose-invert prose-lg max-w-none
            prose-headings:font-heading prose-headings:uppercase prose-headings:tracking-wide
            prose-a:text-neon-cyan prose-a:no-underline hover:prose-a:underline
            prose-p:font-body prose-p:text-gray-300 prose-p:leading-relaxed
            prose-pre:bg-space-800 prose-pre:border prose-pre:border-white/10
            prose-blockquote:border-l-4 prose-blockquote:border-lcars-purple prose-blockquote:bg-space-800/20 prose-blockquote:py-2 prose-blockquote:px-6"
        >
            <Content />
        </div>
    </article>
</Layout>
